"use strict";angular.module("saasFinancialPlannerApp",["ngCookies","ngResource","ngSanitize","ngRoute","nvd3ChartDirectives"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("saasFinancialPlannerApp").controller("MainCtrl",["$scope",function(a){a.chartData=[],a.simulation={},a.simulations=[],a.xFunction=function(){return function(a){return a.x}},a.yFunction=function(){return function(a){return a.y}},a.yAxisTickFormatFunction=function(){return function(a){return d3.format("f")(a)}},a.color=function(){return function(a){return a.y>=0?"green":"red"}},a.showSimulation=function(b){a.simulation=angular.extend({},b),a.uncheckAllSims(),b.isChecked=!0,a.updateChartData(b.data)},a.plotSelected=function(){var b=[];angular.forEach(a.simulations,function(a){a.isChecked&&b.push(a.data[0])}),a.updateChartData(b)},a.doSimulation=function(){var b=[],c=0,d=0;a.simulation.name=a.simulations.length,a.simulation.isChecked=!0,a.uncheckAllSims();for(var e=0;72>e;e++){var f=Math.round(.01*a.simulation.monthlyChurn*c),g=c+a.simulation.numberOfNewCustomers-f,h=g*a.simulation.monthlyFee-a.simulation.salesCost;c=g,d+=h,b.push({x:e,y:d})}a.simulation.data=[{values:b,key:a.simulation.name}],a.simulation.CAC=a.simulation.salesCost/a.simulation.numberOfNewCustomers,a.simulation.LTV=a.simulation.monthlyFee/(.01*a.simulation.monthlyChurn),a.simulations.push(angular.extend({},a.simulation)),a.updateChartData(a.simulation.data)},a.uncheckAllSims=function(){angular.forEach(a.simulations,function(a){a.isChecked=!1})},a.updateChartData=function(b){a.chartData=b}}]);