"use strict";angular.module("saasFinancialPlannerApp",["ngCookies","ngResource","ngSanitize","ngRoute","nvd3ChartDirectives"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("saasFinancialPlannerApp").controller("MainCtrl",["$scope",function(a){a.chartData=[],a.simulation={},a.simulations=[],a.xFunction=function(){return function(a){return a.x}},a.yFunction=function(){return function(a){return a.y}},a.yAxisTickFormatFunction=function(){return function(a){return d3.format("f")(a)}},a.color=function(){return function(a){return a.y>=0?"green":"red"}},a.applySimulation=function(b){a.simulation=angular.extend({},b),a.updateChartData(b)},a.doSimulation=function(){for(var b=[],c=a.simulation.customersMonth0,d=a.simulation.capital,e=0;72>e;e++){var f=Math.round(.01*a.simulation.leadsPerMonth*a.simulation.conversionRate),g=Math.round(.01*a.simulation.monthlyChurn*c),h=c+f-g,i=a.simulation.leadsPerMonth*a.simulation.leadCost+f*a.simulation.costOfSale,j=15e3*a.simulation.productStaff,k=a.simulation.serviceCostPerCustomerPerMonth*h,l=h*a.simulation.monthlyFee-i-j-k;c=h,d+=l,b.push({x:e,y:d})}a.simulation.data=[{values:b,key:"Cash"}],a.simulations.push(angular.extend({},a.simulation)),a.updateChartData(a.simulation)},a.updateChartData=function(b){a.chartData=b.data}}]);